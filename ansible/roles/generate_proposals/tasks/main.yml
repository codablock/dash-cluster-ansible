---

- name: Get governance object count
  ansible.builtin.command: 'dash-cli gobject count'
  register: gobject_count_result
  changed_when: true

- name: Figure out if we need to create more proposals
  ansible.builtin.set_fact:
    new_proposal_count: '{{ governance_proposal_count - (gobject_count_result.stdout | from_json).proposals }}'

- name: Create proposals
  ansible.builtin.include_tasks: createproposaltx.yml
  when: new_proposal_count | int > 0
